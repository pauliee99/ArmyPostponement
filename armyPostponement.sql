-- MySQL Script generated by MySQL Workbench
-- Thu Jan 13 02:10:45 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema army
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `army` ;

-- -----------------------------------------------------
-- Schema army
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `army` DEFAULT CHARACTER SET utf8 ;
USE `army` ;

-- -----------------------------------------------------
-- Table `army`.`Roles`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`Roles` ;

CREATE TABLE IF NOT EXISTS `army`.`Roles` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(50) NOT NULL,
  `enabled` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `army`.`Offices`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`Offices` ;

CREATE TABLE IF NOT EXISTS `army`.`Offices` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(50) NOT NULL,
  `phone` VARCHAR(14) NULL,
  `status` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `army`.`Users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`Users` ;

CREATE TABLE IF NOT EXISTS `army`.`Users` (
  `id` VARCHAR(50) NOT NULL,
  `username` VARCHAR(50) NOT NULL,
  `firstname` VARCHAR(50) NOT NULL,
  `lastname` VARCHAR(50) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `asm` INT NULL,
  `office` INT NOT NULL,
  `role` INT NOT NULL DEFAULT 1,
  `enabled` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_users_roles_role_idx` (`role` ASC) INVISIBLE,
  INDEX `fk_users_offices_office_idx` (`office` ASC) INVISIBLE,
  CONSTRAINT `fk_users_roles_role`
    FOREIGN KEY (`role`)
    REFERENCES `army`.`Roles` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_users_offices_office`
    FOREIGN KEY (`office`)
    REFERENCES `army`.`Offices` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `army`.`authorities`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`authorities` ;

CREATE TABLE IF NOT EXISTS `army`.`authorities` (
 `username` varchar(50) NOT NULL,
 `authority` varchar(50) NOT NULL,
 UNIQUE KEY `ix_auth_username` (`username`,`authority`),
 CONSTRAINT `fk_authorities_users` FOREIGN KEY (`username`) REFERENCES `Users` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- -----------------------------------------------------
-- Table `army`.`Services`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`Services` ;

CREATE TABLE IF NOT EXISTS `army`.`Services` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(50) NOT NULL,
  `path` VARCHAR(255) NOT NULL,
  `enabled` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `army`.`RoleServices`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`RoleServices` ;

CREATE TABLE IF NOT EXISTS `army`.`RoleServices` (
  `role_id` INT NOT NULL,
  `service_id` INT NOT NULL,
  PRIMARY KEY (`role_id`, `service_id`),
  INDEX `fk_RoleServices_Services_service_id_idx` (`service_id` ASC) INVISIBLE,
  INDEX `fk_RoleServices_Roles_role_id_idx` (`role_id` ASC) VISIBLE,
  CONSTRAINT `fk_RoleServices_Roles_role_id`
    FOREIGN KEY (`role_id`)
    REFERENCES `army`.`Roles` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RoleServices_Services_service_id`
    FOREIGN KEY (`service_id`)
    REFERENCES `army`.`Services` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `army`.`Reasons`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`Reasons` ;

CREATE TABLE IF NOT EXISTS `army`.`Reasons` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(50) NOT NULL,
  `status` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `army`.`Postponements`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `army`.`Postponements` ;

CREATE TABLE IF NOT EXISTS `army`.`Postponements` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME NOT NULL,
  `time` DATETIME NOT NULL,
  `reasonId` INT NOT NULL DEFAULT 0,
  `reason` VARCHAR(50) NOT NULL,
  `file` VARCHAR(50) NULL,
  `comments` VARCHAR(50) NULL,
  `userIn` VARCHAR(50) NOT NULL,
  `office` INT NOT NULL DEFAULT 0,
  `status` INT NOT NULL DEFAULT 0,
  `userUpd` VARCHAR(50) NOT NULL,
  `commentUpd` VARCHAR(50) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_postponements_users_userupd_idx` (`userUpd` ASC) VISIBLE,
  INDEX `fk_postponements_offices_office_idx` (`office` ASC) VISIBLE,
  INDEX `fk_postponements_reasons_reasonid_idx` (`reasonId` ASC) VISIBLE,
  INDEX `fk_postponements_users_userin_idx` (`userIn` ASC) VISIBLE,
  CONSTRAINT `fk_postponements_users_userin`
    FOREIGN KEY (`userIn`)
    REFERENCES `army`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_postponements_users_userupd`
    FOREIGN KEY (`userUpd`)
    REFERENCES `army`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_postponements_offices_office`
    FOREIGN KEY (`office`)
    REFERENCES `army`.`Offices` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_postponements_reasons_reasonid`
    FOREIGN KEY (`reasonId`)
    REFERENCES `army`.`Reasons` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `army`.`Roles`
-- -----------------------------------------------------
START TRANSACTION;
USE `army`;
INSERT INTO `army`.`Roles` (`id`, `description`, `enabled`) VALUES (0, 'POLITIS', 1);
INSERT INTO `army`.`Roles` (`id`, `description`, `enabled`) VALUES (1, 'YPALLILOS', 1);
INSERT INTO `army`.`Roles` (`id`, `description`, `enabled`) VALUES (2, 'OFFICER', 1);
INSERT INTO `army`.`Roles` (`id`, `description`, `enabled`) VALUES (3, 'ADMIN', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `army`.`Offices`
-- -----------------------------------------------------
START TRANSACTION;
USE `army`;
INSERT INTO `army`.`Offices` (`id`, `description`, `phone`, `status`) VALUES (0, 'All offices for Admin', NULL, 1);
INSERT INTO `army`.`Offices` (`id`, `description`, `phone`, `status`) VALUES (1, 'Office1', '123456789', 1);
INSERT INTO `army`.`Offices` (`id`, `description`, `phone`, `status`) VALUES (2, 'Office2', '777777777', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `army`.`Users`
-- -----------------------------------------------------
START TRANSACTION;
USE `army`;
INSERT INTO `army`.`Users` (`id`, `firstname`, `lastname`, `password`, `asm`, `office`, `role`, `enabled`) VALUES ('stratos', 'Stratos', 'StratosO', '123', 123, 1, 0, 1);
INSERT INTO `army`.`Users` (`id`, `firstname`, `lastname`, `password`, `asm`, `office`, `role`, `enabled`) VALUES ('pavlos', 'Pavlos', 'PavlosA', '123', 456, 1, 0, 1);
INSERT INTO `army`.`Users` (`id`, `firstname`, `lastname`, `password`, `asm`, `office`, `role`, `enabled`) VALUES ('politis2', 'Politis2', 'PolitisOffice2', '123', 789, 2, 0, 1);
INSERT INTO `army`.`Users` (`id`, `firstname`, `lastname`, `password`, `asm`, `office`, `role`, `enabled`) VALUES ('ypallilos1', 'Ypallilos1', 'YpallilosOffice1', '123', NULL, 1, 1, 1);
INSERT INTO `army`.`Users` (`id`, `firstname`, `lastname`, `password`, `asm`, `office`, `role`, `enabled`) VALUES ('officer1', 'Officer1', 'OfficerOffice1', '123', 100, 1, 2, 1);
INSERT INTO `army`.`Users` (`id`, `firstname`, `lastname`, `password`, `asm`, `office`, `role`, `enabled`) VALUES ('admin', 'Admin', 'Admin', '123', NULL, 0, 3, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `army`.`Reasons`
-- -----------------------------------------------------
START TRANSACTION;
USE `army`;
INSERT INTO `army`.`Reasons` (`id`, `description`, `status`) VALUES (0, 'Reason 0', 1);
INSERT INTO `army`.`Reasons` (`id`, `description`, `status`) VALUES (1, 'Studies', 1);
INSERT INTO `army`.`Reasons` (`id`, `description`, `status`) VALUES (2, 'Health', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `army`.`Postponements`
-- -----------------------------------------------------
START TRANSACTION;
USE `army`;
INSERT INTO `army`.`Postponements` (`id`, `date`, `time`, `reasonId`, `reason`, `file`, `comments`, `userIn`, `office`, `status`, `userUpd`, `commentUpd`) VALUES (1, '13/01/2022 00:00:00', '13/01/2022 21:21:21', 0, 'Studies', '1.pdf', NULL, 'stratos', 1, 0, DEFAULT, NULL);
INSERT INTO `army`.`Postponements` (`id`, `date`, `time`, `reasonId`, `reason`, `file`, `comments`, `userIn`, `office`, `status`, `userUpd`, `commentUpd`) VALUES (2, '13/01/2022 00:00:00', '13/01/2022 22:22:22', 0, 'Health', '2.pdf', NULL, 'pavlos', 1, 0, DEFAULT, NULL);
INSERT INTO `army`.`Postponements` (`id`, `date`, `time`, `reasonId`, `reason`, `file`, `comments`, `userIn`, `office`, `status`, `userUpd`, `commentUpd`) VALUES (3, '13/01/2022 00:00:00', '13/01/2022 23:23:23', 0, 'Health', '3.pdf', NULL, 'politis2', 2, 0, DEFAULT, NULL);

COMMIT;

